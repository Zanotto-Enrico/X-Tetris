\hypertarget{funzioniCpu_8c_source}{}\doxysection{funzioni\+Cpu.\+c}
\mbox{\hyperlink{funzioniCpu_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{headers_8h}{headers.h}}"{}}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00003}\mbox{\hyperlink{funzioniCpu_8c_ad81fdf0e913cb85318cf39c0a6b1fb1a}{00003}} \textcolor{keywordtype}{int} \mbox{\hyperlink{funzioniCpu_8c_a2008363a4d9fe9be71210e7a2ebafa87}{bestX}} = 0, \mbox{\hyperlink{funzioniCpu_8c_ac891e119a2477504e36b609384fb99d2}{bestY}} = 1, \mbox{\hyperlink{funzioniCpu_8c_aee62db5a798cf4c13d81f66441ca34a2}{bestR}} = 0, \mbox{\hyperlink{funzioniCpu_8c_ad81fdf0e913cb85318cf39c0a6b1fb1a}{bestP}} = -\/1000;}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00004}\mbox{\hyperlink{funzioniCpu_8c_a20d8d1f54a664e6c739edef51e735b80}{00004}} \textcolor{keywordtype}{int} \mbox{\hyperlink{funzioniCpu_8c_a20d8d1f54a664e6c739edef51e735b80}{punteggioBest}} = 0;}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00006}\mbox{\hyperlink{funzioniCpu_8c_a3b56bd58ab71c11366cddcf03ca3b4d2}{00006}} \textcolor{keywordtype}{void} \mbox{\hyperlink{funzioniCpu_8c_a3b56bd58ab71c11366cddcf03ca3b4d2}{eseguiMossaCPU}}(\mbox{\hyperlink{structPartita}{Partita}}* pa)}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00007}00007 \{}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00008}00008     \mbox{\hyperlink{funzioniCpu_8c_a80a3370e57277b9bb40f9fd91843aa18}{miglioreMossa}}(pa);                                     \textcolor{comment}{/* prima di tutto calcolo la migliore mossa                   */}  }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00010}00010     \mbox{\hyperlink{structPezzo}{Pezzo}} *pz = \mbox{\hyperlink{eventiPartita_8c_a65b7a5ca94c38ebee4a890329fdc42d1}{generaPezzo}}(\mbox{\hyperlink{funzioniCpu_8c_ad81fdf0e913cb85318cf39c0a6b1fb1a}{bestP}});                        \textcolor{comment}{/* genero il pezzo in base al migliore tipo                   */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00011}00011     \textcolor{keywordflow}{while} (\mbox{\hyperlink{funzioniCpu_8c_aee62db5a798cf4c13d81f66441ca34a2}{bestR}}-\/-\/ > 0)                                         }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00012}00012         \mbox{\hyperlink{eventiPartita_8c_a6bb98f39b683d3b6d4b66be58dbc583e}{ruotaPezzo}}(pa,pz);                                 \textcolor{comment}{/* ruoto il pezzo fino a raggiungere la migliore rotazione    */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00014}00014     \mbox{\hyperlink{eventiPartita_8c_af372721013335e373c8a79a1af8b804d}{rimuoviPezzo}}(pa,pz);                                   \textcolor{comment}{/* rimuovo il pezzo dalla mappa                               */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00015}00015     pz-\/>\mbox{\hyperlink{structPezzo_a849e430c5d9d1d37a0551eb915e479eb}{x}} = \mbox{\hyperlink{funzioniCpu_8c_a2008363a4d9fe9be71210e7a2ebafa87}{bestX}};                                         \textcolor{comment}{/* lo riposiziono alle                                        */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00016}00016     pz-\/>\mbox{\hyperlink{structPezzo_a4f3dce5264e1075cf281a17f25c4fd66}{y}} = \mbox{\hyperlink{funzioniCpu_8c_ac891e119a2477504e36b609384fb99d2}{bestY}};                                         \textcolor{comment}{/* coordinate corrette                                        */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00017}00017     \mbox{\hyperlink{eventiPartita_8c_af0a6d2f6a14a4e9883a40322b586c699}{inserisciPezzo}}(pa,pz);                                 \textcolor{comment}{/* lo re-\/inserisco nella mappa                                */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00018}00018     \mbox{\hyperlink{eventiPartita_8c_aea8e121a46998b4ba6e499c3ad6217de}{confermaPezzo}}(pa,pz);                                  \textcolor{comment}{/* e confermo la sua posizione                                */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00019}00019     }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00020}00020     \textcolor{keywordtype}{int} rimosse = \mbox{\hyperlink{eventiPartita_8c_a974c16f6eb2db617d5f61d7eec167d48}{rimuoviLinee}}(pa);                         \textcolor{comment}{/* verifico se ci sono righe da eliminare e salvo la quantità */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00022}00022     \mbox{\hyperlink{eventiPartita_8c_a3ca0a7e37697fea638822a12904faa47}{incrementaPunteggio}}(\&pa-\/>\mbox{\hyperlink{structPartita_ab14c3baaee8a359486745f6dca4e239f}{punteggio2}}, rimosse);         \textcolor{comment}{/* incremento il punteggio in base alle righe rimosse         */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00023}00023     \textcolor{keywordflow}{if}(rimosse >= 3 )                                      \textcolor{comment}{/* se il numero di righe rimosse è uguale o maggiore di tre   */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00024}00024         \mbox{\hyperlink{eventiPartita_8c_a3462860dd63effd24a917b2dfd8e3dab}{invertiRighe}}( pa-\/>\mbox{\hyperlink{structPartita_ae086a0ff9a982eee8c59b6f504dbacaa}{mappa1}}, rimosse);                \textcolor{comment}{/* inverto le righe del giocatore                             */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00025}00025 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00026}00026     pa-\/>\mbox{\hyperlink{structPartita_a07e379f7f81f342782075a8a81ad1cff}{pezziRimasti}}[\mbox{\hyperlink{funzioniCpu_8c_ad81fdf0e913cb85318cf39c0a6b1fb1a}{bestP}}]-\/-\/;                             \textcolor{comment}{/* diminuisco il numero di pezzi disponibile del tipo scelto  */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00028}00028     \mbox{\hyperlink{funzioniCpu_8c_a20d8d1f54a664e6c739edef51e735b80}{punteggioBest}} = 0;}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00029}00029     }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00030}00030     \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00031}00031 \}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00033}\mbox{\hyperlink{funzioniCpu_8c_a80a3370e57277b9bb40f9fd91843aa18}{00033}} \textcolor{keywordtype}{int} \mbox{\hyperlink{funzioniCpu_8c_a80a3370e57277b9bb40f9fd91843aa18}{miglioreMossa}}(\mbox{\hyperlink{structPartita}{Partita}}* pa)}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00034}00034 \{}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00035}00035     pa-\/>\mbox{\hyperlink{structPartita_ab1979fd9a4fb6c15e162debf21c72235}{pezzoSelezionato}} = \mbox{\hyperlink{headers_8h_a8e85313b011d27748c8c59514d8c79d2af1ce01387d2348f8b858721a7db81670}{S}};                                       \textcolor{comment}{/* in questa funzione testo ogni mossa possibile per determinare la    */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00036}00036     \mbox{\hyperlink{structPezzo}{Pezzo}} *pz;                                                      \textcolor{comment}{/* migliore in ogni data situazione                                    */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00037}00037     \textcolor{keywordtype}{int} tipo , rot;}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00038}00038     \textcolor{keywordflow}{for} (tipo = 0; tipo <= \mbox{\hyperlink{headers_8h_a8e85313b011d27748c8c59514d8c79d2aa70478ce277ffc322f8e1e3418e07355}{Z}}; tipo++ )                              \textcolor{comment}{/* il for più esterno ha il compito di scorrere tutti i tipi di pezzo  */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00039}00039     \{}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00040}00040         \textcolor{keywordflow}{if}(pa-\/>\mbox{\hyperlink{structPartita_a07e379f7f81f342782075a8a81ad1cff}{pezziRimasti}}[tipo] > 0)                              \textcolor{comment}{/* verifico che i pezzi di questo tipo non siano finiti                */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00041}00041         \{}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00042}00042             pz = \mbox{\hyperlink{eventiPartita_8c_a65b7a5ca94c38ebee4a890329fdc42d1}{generaPezzo}}(tipo);                                 \textcolor{comment}{/* genero il pezzo                                                     */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00043}00043             \mbox{\hyperlink{eventiPartita_8c_a2640addffae1e0ba94a6e1270e59054b}{muoviPezzo}}(pa,pz,0,0);                                  \textcolor{comment}{/* e lo posiziono nella mappa                                          */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00044}00044             }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00045}00045             \textcolor{keywordflow}{for} (rot = 0; rot < 4; rot++)                           \textcolor{comment}{/* con questo ciclo testo tutte le 4 rotazioni possibili del pezzo     */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00046}00046             \{}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00047}00047                 \textcolor{keywordflow}{while} (\mbox{\hyperlink{eventiPartita_8c_a2640addffae1e0ba94a6e1270e59054b}{muoviPezzo}}(pa,pz,-\/1,0));                     }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00048}00048                 \textcolor{keywordflow}{do}                                                  \textcolor{comment}{/* con questo ciclo testo tutte le posizioni nell'asse delle x         */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00049}00049                 \{}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00050}00050                     \textcolor{keywordflow}{while} (\mbox{\hyperlink{eventiPartita_8c_a2640addffae1e0ba94a6e1270e59054b}{muoviPezzo}}(pa,pz,0,1));                  \textcolor{comment}{/* fino a che non incontro qualcosa continuo a muoverlo verso il basso */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00051}00051                     \textcolor{keywordtype}{int} punteggio = \mbox{\hyperlink{funzioniCpu_8c_a2d855d001a1f794a18b6011bd1f368fb}{calcolaPunteggioScenario}}(pa);   \textcolor{comment}{/* calcolo il punteggio dello scenario che si è venuto a creare        */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00052}00052                     \textcolor{keywordflow}{if}(punteggio > \mbox{\hyperlink{funzioniCpu_8c_a20d8d1f54a664e6c739edef51e735b80}{punteggioBest}})}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00053}00053                     \{}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00054}00054                         \mbox{\hyperlink{funzioniCpu_8c_a2008363a4d9fe9be71210e7a2ebafa87}{bestX}} = pz-\/>\mbox{\hyperlink{structPezzo_a849e430c5d9d1d37a0551eb915e479eb}{x}};                              \textcolor{comment}{/* se il punteggio appena calcolato risulta maggiore del punteggio     */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00055}00055                         \mbox{\hyperlink{funzioniCpu_8c_ac891e119a2477504e36b609384fb99d2}{bestY}} = pz-\/>\mbox{\hyperlink{structPezzo_a4f3dce5264e1075cf281a17f25c4fd66}{y}};                              \textcolor{comment}{/* best, salvo in memoria il nuovo punteggio e i dati relativi alla    */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00056}00056                         \mbox{\hyperlink{funzioniCpu_8c_aee62db5a798cf4c13d81f66441ca34a2}{bestR}} = rot;                                \textcolor{comment}{/* mossa come: tipo pezzo, rotazione e coordinate                      */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00057}00057                         \mbox{\hyperlink{funzioniCpu_8c_ad81fdf0e913cb85318cf39c0a6b1fb1a}{bestP}} = tipo;}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00058}00058                         \mbox{\hyperlink{funzioniCpu_8c_a20d8d1f54a664e6c739edef51e735b80}{punteggioBest}} = punteggio;}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00059}00059                     \}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00061}00061                     \textcolor{keywordflow}{while} (pz-\/>\mbox{\hyperlink{structPezzo_a4f3dce5264e1075cf281a17f25c4fd66}{y}} != 1)}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00062}00062                         \mbox{\hyperlink{eventiPartita_8c_a2640addffae1e0ba94a6e1270e59054b}{muoviPezzo}}(pa,pz,0,-\/1);                     \textcolor{comment}{/* resetto il pezzo alla posizione di partenza per essere ruotato      */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00063}00063                 \} \textcolor{keywordflow}{while} (\mbox{\hyperlink{eventiPartita_8c_a2640addffae1e0ba94a6e1270e59054b}{muoviPezzo}}(pa,pz,1,0));}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00065}00065                 \textcolor{keywordflow}{while}(!\mbox{\hyperlink{eventiPartita_8c_a6bb98f39b683d3b6d4b66be58dbc583e}{ruotaPezzo}}(pa,pz))                           \textcolor{comment}{/* muovo il pezzo a sinistra fino a che non riesco a passare alla      */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00066}00066                     \mbox{\hyperlink{eventiPartita_8c_a2640addffae1e0ba94a6e1270e59054b}{muoviPezzo}}(pa,pz,-\/1,0);                         \textcolor{comment}{/* prossima rotazione                                                  */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00067}00067             \}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00068}00068             \mbox{\hyperlink{eventiPartita_8c_af372721013335e373c8a79a1af8b804d}{rimuoviPezzo}}(pa,pz);                                    \textcolor{comment}{/* tolgo il pezzo dalla mappa                                          */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00069}00069             \mbox{\hyperlink{eventiPartita_8c_a72ae0f2c84722d8faecac7c208d9382a}{distruggiPezzo}}(pz);                                     \textcolor{comment}{/* libero la memoria occupada dalla struct del pezzo                   */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00070}00070         \}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00071}00071     \}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00072}00072 \}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00074}\mbox{\hyperlink{funzioniCpu_8c_a2d855d001a1f794a18b6011bd1f368fb}{00074}} \textcolor{keywordtype}{int} \mbox{\hyperlink{funzioniCpu_8c_a2d855d001a1f794a18b6011bd1f368fb}{calcolaPunteggioScenario}}(\mbox{\hyperlink{structPartita}{Partita}}* pa)}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00075}00075 \{}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00076}00076     \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00077}00077     \textcolor{keywordtype}{int} trovato = 0;}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00078}00078     \textcolor{keywordtype}{int} punteggio = 100;                                                    \textcolor{comment}{/* ogni scenario inizia con un punteggio base di 100 punti      */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00079}00079     \textcolor{keywordflow}{for} (i = 0; i < 15 \&\& !trovato; i++)                                }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00080}00080     \{                                                                       \textcolor{comment}{/* scorro tutte le righe per vedere se sono occupate da blocchi */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00081}00081         \textcolor{keywordflow}{for} ( j = 0; j < 10; j++)                                           }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00082}00082         \{}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00083}00083             trovato = pa-\/>\mbox{\hyperlink{structPartita_ace5973a817177da5c15b3a8e6b737345}{mappa2}}[i][j] + trovato;                           \textcolor{comment}{/* passo tutte le colonne per vedere se trovo almeno un blocco  */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00084}00084         \}                                                                   }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00085}00085     \}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00086}00086     punteggio += (16-\/i)*(-\/1);                                               \textcolor{comment}{/* la variabile punteggio viene decrementata in base a quanto   */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00087}00087     \textcolor{keywordtype}{int} n;                                                                  \textcolor{comment}{/* alta è la costruzione di blocchi costruita                   */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00088}00088     \textcolor{keywordflow}{for} ( n = 14; n >= i-\/1; n-\/-\/)}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00089}00089     \{                                                                       \textcolor{comment}{/* ciclo tutte le righe occupate da almeno un blocco            */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00090}00090         \textcolor{keywordflow}{for} ( j = 0; j < 10; j++)           }
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00091}00091         \{                                                                   \textcolor{comment}{/* per ogni riga cerco quanti "{}buchi"{} sono presenti             */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00092}00092             \textcolor{keywordflow}{if}(pa-\/>\mbox{\hyperlink{structPartita_ace5973a817177da5c15b3a8e6b737345}{mappa2}}[n][j] == 0)}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00093}00093                 punteggio = punteggio -\/ 3 -\/2*pa-\/>\mbox{\hyperlink{structPartita_ace5973a817177da5c15b3a8e6b737345}{mappa2}}[n-\/1][j];            \textcolor{comment}{/* rimuovo dal punteggio 3 punti per ogni buco che trovo        */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00094}00094         \}                                                                   \textcolor{comment}{/* e tolgo 2 punti ulteriori se il blocco non è raggiungibile   */}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00095}00095     \}}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00096}00096     \textcolor{keywordflow}{return} punteggio;}
\DoxyCodeLine{\Hypertarget{funzioniCpu_8c_source_l00097}00097 \}}

\end{DoxyCode}
